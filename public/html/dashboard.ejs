<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GTPSID Login</title>
  <link rel="icon" href="https://s3.eu-west-1.amazonaws.com/cdn.growtopiagame.com/website/resources/assets/images/growtopia.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ========== VARIABEL WARNA & CONFIG ========== */
    :root {
      --primary-gradient: linear-gradient(135deg, #FF9966 0%, #FF5E62 100%);
      --bg-gradient: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
      --text-main: #2d3436;
      --text-muted: #636e72;
      --input-bg: #f1f2f6;
      --white: #ffffff;
      --shadow: 0 10px 40px rgba(255, 100, 50, 0.2);
    }

    /* ========== RESET & BASE ========== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif; /* Font modern */
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: var(--bg-gradient);
      padding: 20px;
      overflow-x: hidden;
    }

    /* ========== CONTAINER UTAMA (KOTAK DASHBOARD) ========== */
    .auth-wrapper {
      position: relative;
      background: var(--white);
      width: 100%;
      max-width: 420px; /* Ukuran kecil & rapi */
      min-height: 580px;
      border-radius: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.15);
      padding: 40px 30px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* Hiasan background bulat di dalam kartu */
    .auth-wrapper::before {
      content: '';
      position: absolute;
      top: -50px;
      right: -50px;
      width: 150px;
      height: 150px;
      background: var(--primary-gradient);
      border-radius: 50%;
      opacity: 0.1;
      z-index: 0;
    }

    .auth-wrapper::after {
      content: '';
      position: absolute;
      bottom: -30px;
      left: -30px;
      width: 100px;
      height: 100px;
      background: #f6d365;
      border-radius: 50%;
      opacity: 0.2;
      z-index: 0;
    }

    /* ========== HEADER ========== */
    .header {
      text-align: center;
      margin-bottom: 30px;
      z-index: 1;
    }

    .logo-icon {
      width: 60px;
      height: 60px;
      background: var(--primary-gradient);
      border-radius: 15px;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      font-size: 30px;
      color: white;
      margin-bottom: 15px;
      box-shadow: 0 10px 20px rgba(255, 94, 98, 0.3);
      transform: rotate(-10deg);
    }

    .header h1 {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-main);
    }

    .header p {
      font-size: 14px;
      color: var(--text-muted);
      margin-top: 5px;
    }

    /* ========== TOGGLE SWITCH (ANIMASI KEREN) ========== */
    .toggle-container {
      position: relative;
      display: flex;
      background: var(--input-bg);
      border-radius: 50px;
      padding: 5px;
      margin-bottom: 30px;
      z-index: 1;
    }

    .toggle-btn {
      flex: 1;
      text-align: center;
      padding: 10px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-muted);
      border: none;
      background: transparent;
      transition: color 0.3s ease;
      z-index: 2;
      outline: none;
    }

    .toggle-btn.active {
      color: white;
    }

    /* Background pill yang bergerak */
    .slider {
      position: absolute;
      top: 5px;
      left: 5px;
      height: calc(100% - 10px);
      width: calc(50% - 5px);
      background: var(--primary-gradient);
      border-radius: 40px;
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Bouncy effect */
      z-index: 1;
      box-shadow: 0 5px 15px rgba(255, 94, 98, 0.3);
    }

    /* ========== FORM AREA (SLIDING EFFECT) ========== */
    .forms-wrapper {
      position: relative;
      flex: 1;
      overflow: hidden;
      z-index: 1;
    }

    .form-content {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      transition: all 0.5s ease-in-out;
      opacity: 0;
      pointer-events: none;
      transform: translateX(100px); /* Default slide right */
    }

    .form-content.active {
      opacity: 1;
      pointer-events: all;
      transform: translateX(0);
      position: relative; /* Agar tingginya terhitung */
    }

    /* Geser ke kiri untuk form yang tidak aktif */
    .form-content.slide-left {
      transform: translateX(-100px);
    }

    /* ========== INPUT STYLES ========== */
    .input-group {
      margin-bottom: 20px;
      position: relative;
    }

    input[type="text"], 
    input[type="password"] {
      width: 100%;
      padding: 15px 20px;
      border: 2px solid transparent;
      background: var(--input-bg);
      border-radius: 12px;
      font-size: 14px;
      color: var(--text-main);
      transition: all 0.3s ease;
      outline: none;
    }

    input:focus {
      background: white;
      border-color: #FF9966;
      box-shadow: 0 5px 20px rgba(255, 153, 102, 0.1);
    }

    ::placeholder {
      color: #b2bec3;
    }

    /* Show Password Toggle */
    .toggle-password {
      font-size: 12px;
      color: #FF5E62;
      text-align: right;
      margin-top: -10px;
      margin-bottom: 20px;
      cursor: pointer;
      font-weight: 600;
      display: inline-block;
      float: right;
    }

    /* ========== BUTTONS ========== */
    .btn-primary {
      width: 100%;
      padding: 15px;
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(255, 94, 98, 0.3);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 30px rgba(255, 94, 98, 0.4);
    }

    .btn-primary:active {
      transform: scale(0.98);
    }

    /* ========== AUTOCOMPLETE ========== */
    .autocomplete-list {
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      background: white;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      z-index: 10;
      list-style: none;
      max-height: 150px;
      overflow-y: auto;
      margin-top: 5px;
      padding: 5px 0;
    }

    .autocomplete-list li {
      padding: 10px 20px;
      font-size: 14px;
      color: var(--text-main);
      cursor: pointer;
    }

    .autocomplete-list li:hover {
      background: #fff0eb;
      color: #FF5E62;
    }

    /* ========== MESSAGE BOX ========== */
    .message-box {
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 15px;
      text-align: center;
      font-size: 13px;
      display: none;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .message-success { background: #dff9fb; color: #2ecc71; border: 1px solid #badc58; }
    .message-error { background: #ff767520; color: #d63031; border: 1px solid #ff7675; }

    /* ========== FOOTER ========== */
    .footer {
      text-align: center;
      margin-top: 20px;
      font-size: 12px;
      color: var(--text-muted);
      opacity: 0.7;
    }

  </style>
</head>
<body>

  <div class="auth-wrapper">
    <div class="header">
      <div class="logo-icon">âš¡</div>
      <h1 id="headerTitle">Welcome Back!</h1>
      <p id="headerDesc">Enter your details to continue.</p>
    </div>

    <div class="toggle-container">
      <div class="slider" id="slider"></div>
      <button class="toggle-btn active" id="btn-login" onclick="toggleForm('login')">Login</button>
      <button class="toggle-btn" id="btn-register" onclick="toggleForm('register')">Register</button>
    </div>

    <div class="forms-wrapper">
      
      <div class="form-content active" id="loginFormContent">
        <form method="POST" action="/player/growid/login/validate" autocomplete="off" id="loginForm">
          <div class="input-group">
            <input type="text" name="_token" id="loginServerInput" placeholder="Server Name" required />
          </div>
          <div class="input-group">
            <input type="text" name="growId" id="loginGrowId" placeholder="GrowID / Username" required />
          </div>
          <div class="input-group">
            <input type="password" name="password" id="loginPassword" placeholder="Password" required />
          </div>
          <div class="toggle-password" onclick="togglePassword('loginPassword', this)">Show Password</div>

          <button type="submit" name="action" value="Login" class="btn-primary">Sign In</button>
        </form>
      </div>

      <div class="form-content" id="registerFormContent">
        <form method="POST" action="/player/growid/login/validate" autocomplete="off" id="registerForm">
           <div class="input-group">
            <input type="text" name="_token" id="registerServerInput" placeholder="Server Name" required />
          </div>
          <div class="input-group">
            <input type="text" name="growId" id="registerGrowId" placeholder="Create GrowID" required />
          </div>
          <div class="input-group">
            <input type="password" name="password" id="registerPassword" placeholder="Create Password" required />
          </div>
          <div class="input-group">
            <input type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirm Password" required />
          </div>
          <div class="toggle-password" onclick="toggleMultiplePasswords(['registerPassword', 'confirmPassword'], this)">Show Password</div>

          <button type="submit" name="action" value="Register" class="btn-primary">Create Account</button>
        </form>
      </div>

    </div>

    <div class="footer">
      &copy; 2025 GTPSID. Secure System.
    </div>
  </div>

  <script>
    /* ========== LOGIC JAVASCRIPT ========== */
    
    // Data Server
    const servers = ["STYLOPS", "CHINAPS", "COASTPS", "SLOWLYPS", "NEXPS", "TESPS", "IDLEPS"];

    // State Handling
    document.addEventListener("DOMContentLoaded", () => {
      // Load LocalStorage
      const growId = localStorage.getItem("growId");
      const lastServer = localStorage.getItem("lastServer");
      
      if (growId) {
        document.getElementById("loginGrowId").value = growId;
        document.getElementById("registerGrowId").value = growId;
      }
      if (lastServer) {
        document.getElementById("loginServerInput").value = lastServer;
        document.getElementById("registerServerInput").value = lastServer;
      }
      
      setupServerAutocomplete('loginServerInput');
      setupServerAutocomplete('registerServerInput');
    });

    // 1. ANIMATED TOGGLE FUNCTION
    function toggleForm(mode) {
      const slider = document.getElementById('slider');
      const loginBtn = document.getElementById('btn-login');
      const regBtn = document.getElementById('btn-register');
      const loginForm = document.getElementById('loginFormContent');
      const regForm = document.getElementById('registerFormContent');
      const title = document.getElementById('headerTitle');
      const desc = document.getElementById('headerDesc');

      // Reset Message Box when switching
      const msgBox = document.querySelector('.message-box');
      if(msgBox) msgBox.style.display = 'none';

      if (mode === 'register') {
        // Pindah Slider ke Kanan
        slider.style.transform = 'translateX(100%)';
        
        // Update Class Button
        loginBtn.classList.remove('active');
        regBtn.classList.add('active');

        // Animasi Form
        loginForm.classList.remove('active');
        loginForm.classList.add('slide-left'); // Login geser ke kiri
        
        regForm.classList.add('active');
        regForm.classList.remove('slide-left');

        // Ganti Teks
        title.innerText = "Join Us!";
        desc.innerText = "Create a new adventure today.";
      } else {
        // Pindah Slider ke Kiri
        slider.style.transform = 'translateX(0)';

        // Update Class Button
        regBtn.classList.remove('active');
        loginBtn.classList.add('active');

        // Animasi Form
        regForm.classList.remove('active');
        
        loginForm.classList.remove('slide-left'); // Reset posisi login
        loginForm.classList.add('active');

        // Ganti Teks
        title.innerText = "Welcome Back!";
        desc.innerText = "Enter your details to continue.";
      }
    }

    // 2. PASSWORD TOGGLE
    function togglePassword(id, el) {
      const input = document.getElementById(id);
      if (input.type === "password") {
        input.type = "text";
        el.innerText = "Hide";
      } else {
        input.type = "password";
        el.innerText = "Show Password";
      }
    }

    function toggleMultiplePasswords(ids, el) {
      let isPassword = true;
      // Check first input to decide state
      if(document.getElementById(ids[0]).type === "text") isPassword = false;

      ids.forEach(id => {
        document.getElementById(id).type = isPassword ? "text" : "password";
      });
      el.innerText = isPassword ? "Hide" : "Show Password";
    }

    // 3. FORM VALIDATION
    function handleFormSubmit(e, type) {
      const server = document.getElementById(type + 'ServerInput').value;
      const growId = document.getElementById(type + 'GrowId').value;
      const password = document.getElementById(type + 'Password').value;

      // Basic Check
      if(!server || !growId || !password) {
        e.preventDefault();
        showMessage(e.target, "All fields are required!", "error");
        return;
      }

      if(type === 'register') {
        const confirm = document.getElementById('confirmPassword').value;
        if(password !== confirm) {
          e.preventDefault();
          showMessage(e.target, "Passwords do not match!", "error");
          return;
        }
      }

      // Save Data
      localStorage.setItem("growId", growId);
      localStorage.setItem("lastServer", server);
    }

    document.getElementById("loginForm").addEventListener("submit", (e) => handleFormSubmit(e, 'login'));
    document.getElementById("registerForm").addEventListener("submit", (e) => handleFormSubmit(e, 'register'));

    // 4. MESSAGE SYSTEM
    function showMessage(form, msg, type) {
      let box = form.parentNode.querySelector('.message-box');
      if(!box) {
        box = document.createElement('div');
        form.parentNode.insertBefore(box, form);
      }
      box.className = `message-box message-${type}`;
      box.innerText = msg;
      box.style.display = 'block';
      setTimeout(() => box.style.display = 'none', 3000);
    }

    // 5. AUTOCOMPLETE SYSTEM (Sama seperti sebelumnya tapi styling baru)
    function setupServerAutocomplete(inputId) {
      const input = document.getElementById(inputId);
      let list = null;

      input.addEventListener('input', function() {
        if(list) list.remove();
        const val = this.value.toUpperCase();
        if(!val) return;
        
        const matches = servers.filter(s => s.startsWith(val));
        if(!matches.length) return;

        list = document.createElement('ul');
        list.className = 'autocomplete-list';
        
        matches.forEach(m => {
          const item = document.createElement('li');
          item.innerText = m;
          item.onclick = () => {
            input.value = m;
            list.remove();
            list = null;
          };
          list.appendChild(item);
        });
        
        input.parentNode.appendChild(list);
      });

      document.addEventListener('click', (e) => {
        if(list && !input.contains(e.target)) {
          list.remove();
          list = null;
        }
      });
    }

  </script>
</body>
</html>
